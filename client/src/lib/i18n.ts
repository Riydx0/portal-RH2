import { useState } from 'react';

export type Language = 'en' | 'ar';

const translations = {
  en: {
    // Navigation
    dashboard: 'Dashboard',
    downloads: 'Downloads',
    tickets: 'Tickets',
    users: 'Users',
    groups: 'Groups',
    categories: 'Categories',
    software: 'Software',
    licenses: 'Licenses',
    settings: 'Settings',
    appearance: 'Appearance',
    branding: 'Branding',
    sso: 'SSO Settings',
    changePassword: 'Change Password',
    language: 'Language',
    activityLogs: 'Activity Logs',
    administration: 'Administration',
    mainMenu: 'Main Menu',
    account: 'Account',
    logout: 'Logout',
    resourceManagement: 'Resource Management',
    infrastructure: 'Infrastructure',
    teamManagement: 'Team Management',
    systemSettings: 'System Settings',
    of: 'of',
    externalLinks: 'External Links',
    dashboardSettings: 'Dashboard Settings',
    networks: 'Networks',
    vpn: 'VPN Settings',
    firewall: 'Firewall Rules',
    finance: 'Finance',
    invoices: 'Invoices',
    pricing: 'Pricing',
    softwarePricing: 'Software Pricing',
    billing: 'Billing',
    pricingPlans: 'Pricing Plans',
    choosePlan: 'Choose your plan',
    getStarted: 'Get Started',
    upgradePlan: 'Upgrade Plan',
    contactSales: 'Contact Sales',

    // Auth Page
    usernameOrEmail: 'Username or Email',
    password: 'Password',
    signIn: 'Sign in',
    signingIn: 'Signing in...',
    forgotPassword: 'Forgot password?',
    or: 'Or',
    signInWithSSO: 'Sign in with SSO',
    dontHaveAccount: "Don't have an account?",
    registerHere: 'Register here',
    fullName: 'Full Name',
    email: 'Email',
    register: 'Register',
    registering: 'Registering...',
    alreadyHaveAccount: 'Already have an account?',
    loginHere: 'Log in here',

    // User Management
    userManagement: 'User Management',
    managementDescription: 'Manage system users and their roles',
    addUser: 'Add User',
    createNewUser: 'Create New User',
    addNewUserDescription: 'Add a new user to the system with their role and credentials.',
    totalUsers: 'Total Users',
    adminUsers: 'Admin Users',
    clientUsers: 'Client Users',
    fullAccessUsers: 'Full system access',
    limitedAccessUsers: 'Limited access users',
    searchByNameOrEmail: 'Search by name or email...',
    allRoles: 'All Roles',
    adminOnly: 'Admin Only',
    clientOnly: 'Client Only',
    ofUsers: 'of users',
    name: 'Name',
    role: 'Role',
    joined: 'Joined',
    actions: 'Actions',
    edit: 'Edit',
    delete: 'Delete',
    adminFullAccess: 'Admin - Full Access',
    clientLimitedAccess: 'Client - Limited Access',
    createUser: 'Create User',
    creating: 'Creating...',
    editUser: 'Edit User',
    updateUserInfo: 'Update user information and role.',
    leaveEmptyPassword: 'Leave empty to keep current password',
    cancel: 'Cancel',
    updateUser: 'Update User',
    updating: 'Updating...',
    deleteUserConfirm: 'Delete User',
    deleteUserWarning: 'Are you sure you want to delete user',
    deleteWarningDescription: 'This action cannot be undone. All associated data will be preserved but the user account will be removed.',
    deleteAction: 'Delete',
    deleting: 'Deleting...',
    success: 'Success',
    error: 'Error',
    userCreatedSuccessfully: 'User created successfully',
    errorCreatingUser: 'Error creating user',
    userUpdatedSuccessfully: 'User updated successfully',
    errorUpdatingUser: 'Error updating user',
    userDeletedSuccessfully: 'User deleted successfully',
    errorDeletingUser: 'Error deleting user',
    copied: 'Copied',
    emailCopiedToClipboard: 'Email copied to clipboard',
    noUsersFound: 'No users found',
    noUsersMatch: 'No users match your filters',

    // Activity Logs
    activityLogsTitle: 'Activity Logs',
    viewAllSystemActivities: 'View all system activities and user actions',
    exportCSV: 'Export CSV',
    totalActivities: 'Total Activities',
    last24Hours: 'Last 24 hours',
    loginEvents: 'Login Events',
    successfulLogins: 'Successful logins',
    failedAttempts: 'Failed Attempts',
    failedActions: 'Failed actions',
    warnings: 'Warnings',
    suspiciousActivities: 'Suspicious activities',
    activityLog: 'Activity Log',
    entries: 'entries',
    searchByUserActionDescription: 'Search by user, action, or description...',
    allTypes: 'All Types',
    successType: 'Success',
    errorType: 'Error',
    warningType: 'Warning',
    infoType: 'Info',
    type: 'Type',
    action: 'Action',
    user: 'User',
    description: 'Description',
    ipAddress: 'IP Address',
    timestamp: 'Timestamp',
    noLogsMatch: 'No logs match your filters',

    // Language Settings
    languageSettings: 'Language Settings',
    chooseYourPreferredLanguage: 'Choose your preferred interface language',
    availableLanguages: 'Available Languages',
    selectPreferredLanguageAllTextUpdates: 'Select your preferred language and all interface text will update immediately',
    active: 'Active',
    information: 'Information',
    languageSavedLocally: 'Your language preference is saved locally in your browser',
    languagePersistNextLogin: 'Your language preference will persist when you log back in',
    entireAppSupportsLanguage: 'The entire application supports your chosen language',
    languageChanged: 'Language Changed',
    changedToArabic: 'تم تغيير اللغة إلى العربية بنجاح',
    changedToEnglish: 'Language changed to English successfully',
  },
  ar: {
    // Navigation
    dashboard: 'لوحة التحكم',
    downloads: 'التنزيلات',
    tickets: 'التذاكر',
    users: 'المستخدمون',
    groups: 'المجموعات',
    categories: 'الفئات',
    software: 'البرامج',
    licenses: 'الرخص',
    settings: 'الإعدادات',
    appearance: 'المظهر',
    branding: 'العلامة التجارية',
    sso: 'إعدادات SSO',
    changePassword: 'تغيير كلمة المرور',
    language: 'اللغة',
    activityLogs: 'سجل النشاطات',
    administration: 'الإدارة',
    mainMenu: 'القائمة الرئيسية',
    account: 'الحساب',
    logout: 'تسجيل الخروج',
    resourceManagement: 'إدارة الموارد',
    infrastructure: 'البنية التحتية',
    teamManagement: 'إدارة الفريق',
    systemSettings: 'إعدادات النظام',
    of: 'من',
    externalLinks: 'الروابط الخارجية',
    dashboardSettings: 'إعدادات لوحة التحكم',
    networks: 'الشبكات',
    vpn: 'إعدادات VPN',
    firewall: 'قواعد جدار الحماية',
    finance: 'المالية',
    invoices: 'الفواتير',
    pricing: 'التسعير',
    softwarePricing: 'تسعير البرامج',
    billing: 'الفواتير',
    pricingPlans: 'خطط التسعير',
    choosePlan: 'اختر خطتك',
    getStarted: 'ابدأ الآن',
    upgradePlan: 'ترقية الآن',
    contactSales: 'اتصل بالمبيعات',

    // Auth Page
    usernameOrEmail: 'اسم المستخدم أو البريد الإلكتروني',
    password: 'كلمة المرور',
    signIn: 'تسجيل الدخول',
    signingIn: 'جاري تسجيل الدخول...',
    forgotPassword: 'هل نسيت كلمة المرور؟',
    or: 'أو',
    signInWithSSO: 'تسجيل الدخول عبر SSO',
    dontHaveAccount: 'ليس لديك حساب؟',
    registerHere: 'سجل هنا',
    fullName: 'الاسم الكامل',
    email: 'البريد الإلكتروني',
    register: 'إنشاء حساب',
    registering: 'جاري الإنشاء...',
    alreadyHaveAccount: 'هل لديك حساب بالفعل؟',
    loginHere: 'تسجيل الدخول',

    // User Management
    userManagement: 'إدارة المستخدمين',
    managementDescription: 'إدارة مستخدمي النظام والأدوار الخاصة بهم',
    addUser: 'إضافة مستخدم',
    createNewUser: 'إنشاء مستخدم جديد',
    addNewUserDescription: 'أضف مستخدماً جديداً إلى النظام مع دوره وبيانات اعتماده.',
    totalUsers: 'إجمالي المستخدمين',
    adminUsers: 'المسؤولون',
    clientUsers: 'المستخدمون العاديون',
    fullAccessUsers: 'وصول كامل للنظام',
    limitedAccessUsers: 'المستخدمون ذوو الوصول المحدود',
    searchByNameOrEmail: 'ابحث باسم أو بريد إلكتروني...',
    allRoles: 'جميع الأدوار',
    adminOnly: 'المسؤولون فقط',
    clientOnly: 'المستخدمون العاديون فقط',
    ofUsers: 'من المستخدمين',
    name: 'الاسم',
    role: 'الدور',
    joined: 'تاريخ الانضمام',
    actions: 'الإجراءات',
    edit: 'تعديل',
    delete: 'حذف',
    adminFullAccess: 'مسؤول - وصول كامل',
    clientLimitedAccess: 'عميل - وصول محدود',
    createUser: 'إنشاء المستخدم',
    creating: 'جاري الإنشاء...',
    editUser: 'تعديل المستخدم',
    updateUserInfo: 'تحديث معلومات المستخدم والدور.',
    leaveEmptyPassword: 'اترك فارغاً للاحتفاظ بكلمة المرور الحالية',
    cancel: 'إلغاء',
    updateUser: 'تحديث المستخدم',
    updating: 'جاري التحديث...',
    deleteUserConfirm: 'حذف المستخدم',
    deleteUserWarning: 'هل تريد بالتأكيد حذف المستخدم',
    deleteWarningDescription: 'لا يمكن التراجع عن هذا الإجراء. سيتم الاحتفاظ بجميع البيانات المرتبطة لكن سيتم حذف حساب المستخدم.',
    deleteAction: 'حذف',
    deleting: 'جاري الحذف...',
    success: 'نجاح',
    error: 'خطأ',
    userCreatedSuccessfully: 'تم إنشاء المستخدم بنجاح',
    errorCreatingUser: 'خطأ في إنشاء المستخدم',
    userUpdatedSuccessfully: 'تم تحديث المستخدم بنجاح',
    errorUpdatingUser: 'خطأ في تحديث المستخدم',
    userDeletedSuccessfully: 'تم حذف المستخدم بنجاح',
    errorDeletingUser: 'خطأ في حذف المستخدم',
    copied: 'تم النسخ',
    emailCopiedToClipboard: 'تم نسخ البريد الإلكتروني إلى الحافظة',
    noUsersFound: 'لم يتم العثور على مستخدمين',
    noUsersMatch: 'لا توجد مستخدمين يطابقون معايير البحث الخاصة بك',

    // Activity Logs
    activityLogsTitle: 'سجل النشاطات',
    viewAllSystemActivities: 'عرض جميع أنشطة النظام وإجراءات المستخدم',
    exportCSV: 'تصدير CSV',
    totalActivities: 'إجمالي النشاطات',
    last24Hours: 'آخر 24 ساعة',
    loginEvents: 'أحداث تسجيل الدخول',
    successfulLogins: 'عمليات تسجيل دخول ناجحة',
    failedAttempts: 'المحاولات الفاشلة',
    failedActions: 'الإجراءات الفاشلة',
    warnings: 'التحذيرات',
    suspiciousActivities: 'الأنشطة المريبة',
    activityLog: 'سجل النشاط',
    entries: 'إدخالات',
    searchByUserActionDescription: 'ابحث حسب المستخدم أو الإجراء أو الوصف...',
    allTypes: 'جميع الأنواع',
    successType: 'نجاح',
    errorType: 'خطأ',
    warningType: 'تحذير',
    infoType: 'معلومة',
    type: 'النوع',
    action: 'الإجراء',
    user: 'المستخدم',
    description: 'الوصف',
    ipAddress: 'عنوان IP',
    timestamp: 'الوقت والتاريخ',
    noLogsMatch: 'لا توجد سجلات تطابق معايير البحث الخاصة بك',

    // Language Settings
    languageSettings: 'إعدادات اللغة',
    chooseYourPreferredLanguage: 'اختر لغتك المفضلة للواجهة',
    availableLanguages: 'اللغات المتاحة',
    selectPreferredLanguageAllTextUpdates: 'اختر اللغة التي تفضلها ستتغير جميع نصوص التطبيق فوراً',
    active: 'نشط',
    information: 'معلومات',
    languageSavedLocally: 'يتم حفظ تفضيل اللغة محلياً في متصفحك',
    languagePersistNextLogin: 'سيستمر تفضيل اللغة عند تسجيل الدخول التالي',
    entireAppSupportsLanguage: 'يدعم التطبيق بالكامل اللغة التي تختارها',
    languageChanged: 'تم تغيير اللغة',
    changedToArabic: 'تم تغيير اللغة إلى العربية بنجاح',
    changedToEnglish: 'تم تغيير اللغة إلى الإنجليزية بنجاح',
  },
};

export function getLanguage(): Language {
  if (typeof window === 'undefined') return 'en';
  const stored = localStorage.getItem('language') as Language;
  return stored || 'en';
}

export function setLanguage(lang: Language) {
  localStorage.setItem('language', lang);
  if (typeof document !== 'undefined') {
    document.documentElement.lang = lang;
    document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
  }
}

export function initLanguage() {
  const lang = getLanguage();
  setLanguage(lang);
}

export function t(key: keyof typeof translations.en, lang: Language = getLanguage()): string {
  return translations[lang][key] || translations.en[key] || key;
}

export function useLanguage() {
  const [lang, setLang] = useState<Language>(getLanguage());
  
  const changeLang = (newLang: Language) => {
    setLanguage(newLang);
    setLang(newLang);
  };

  return { lang, changeLang };
}
